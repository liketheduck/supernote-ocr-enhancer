# Supernote OCR Enhancer - Environment Configuration
# Copy this to .env.local and customize for your setup

# =============================================================================
# STORAGE MODE CONFIGURATION
# =============================================================================
# Choose how you sync your Supernote files. Options:
#
# 1. personal_cloud (DEFAULT) - Self-hosted Supernote Cloud sync server
#    Configure: STORAGE_MODE, MYSQL_PASSWORD, SUPERNOTE_DATA_PATH
#    Run with: docker compose up -d
#
# 2. mac_app - Official Supernote Mac app
#    Configure: MACAPP_NOTES_PATH, MACAPP_DATABASE_PATH (or use --auto)
#    Run with: ./run-with-macapp.sh
#
# 3. none - Manual file transfer (USB, file manager)
#    Configure: SUPERNOTE_DATA_PATH only
#    Run with: docker compose run --rm ocr-enhancer python /app/main.py
#
# Leave blank for auto-detection based on other settings
# STORAGE_MODE=

# =============================================================================
# OPTION 1: Personal Cloud (Self-hosted Sync Server)
# =============================================================================
# If you use the self-hosted Supernote Cloud sync server (recommended for power users)

# Path to your Supernote data directory (where .note files are synced)
# This is mounted into the Docker container
SUPERNOTE_DATA_PATH=/path/to/your/supernote/data

# REQUIRED FOR PERSONAL CLOUD: Enable sync mode and provide MySQL password
# STORAGE_MODE=personal_cloud
# MYSQL_PASSWORD=your_password  # Get with: docker exec supernote-mariadb env | grep MYSQL_PASSWORD

# =============================================================================
# OPTION 2: Supernote Mac App
# =============================================================================
# If you use the official Supernote Mac app instead of Personal Cloud
#
# TIP: Run ./run-with-macapp.sh --auto to auto-detect these paths!
#
# The Mac app stores files in:
# ~/Library/Containers/com.ratta.supernote/Data/Library/Application Support/
# com.ratta.supernote/<USER_ID>/
#
# Your USER_ID is a long numeric string (visible in that directory)

# Path to the Mac app's Supernote folder containing your .note files
# Example: ~/Library/Containers/com.ratta.supernote/.../123456789/Supernote
# MACAPP_NOTES_PATH=

# Path to the Mac app's SQLite database (usually auto-detected)
# Example: ~/Library/Containers/com.ratta.supernote/.../123456789/supernote.db
# MACAPP_DATABASE_PATH=

# =============================================================================
# Container Configuration
# =============================================================================

# Container timezone (for cron scheduling)
# Set to your local timezone so hourly cron jobs run at expected local times
# Common values: America/New_York, America/Los_Angeles, America/Chicago,
#                America/Denver, Europe/London, Asia/Tokyo
# Default: UTC if not set
# TZ=America/New_York

# =============================================================================
# OCR API Configuration
# =============================================================================

# OCR API endpoint (MLX-VLM server)
# Use host.docker.internal for Docker on Mac/Windows
OCR_API_URL=http://host.docker.internal:8100

# =============================================================================
# Processing Settings
# =============================================================================

# Processing interval: 0 = single run, >0 = continuous with interval in seconds
PROCESS_INTERVAL=0

# Log level: DEBUG, INFO, WARNING, ERROR
LOG_LEVEL=INFO

# Write OCR data back to .note files
WRITE_TO_NOTE=true

# Create backups before modifying files
CREATE_BACKUPS=true

# FILE_RECOGN_TYPE controls what the Supernote device does with recognition:
#   "0"    = Disable device realtime OCR (device won't OCR new strokes)
#   "1"    = Enable device realtime OCR (device OCRs new strokes) [DEFAULT]
#   "keep" = Inject OCR but preserve file's existing TYPE setting (0 or 1)
#
# NOTE: Both "0" and "1" allow searching existing OCR data!
# Use "0" if you want our better OCR to be the only OCR (no device override)
# Use "1" if you want immediate (basic) OCR for new content before our enhancer runs
# FILE_RECOGN_TYPE=1
